import{S as C,i as O,s as E,e as j,a as m,b as h,t as v,c as _,d as b,f as p,g as F,h as k,j as M,n as I,o as z,k as K,l as T,m as S,p as A,r as V,q as W,u as $,v as B,w as G,x as H}from"./vendor.4e266ea1.js";const J=function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&e(o)}).observe(document,{childList:!0,subtree:!0});function n(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerpolicy&&(i.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?i.credentials="include":t.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function e(t){if(t.ep)return;t.ep=!0;const i=n(t);fetch(t.href,i)}};J();function D(c,l,n){const e=c.slice();return e[9]=l[n],e}function L(c,l,n){const e=c.slice();return e[12]=l[n],e}function Q(c){let l;return{c(){l=h("label"),l.textContent="No available MIDI inputs",M(l,"for","midi-input-select")},m(n,e){m(n,l,e)},p:I,d(n){n&&p(l)}}}function R(c){let l,n,e,t,i,o=c[2],u=[];for(let r=0;r<o.length;r+=1)u[r]=N(L(c,o,r));return{c(){l=h("label"),l.textContent="Select MIDI Input:",n=k(),e=h("select");for(let r=0;r<u.length;r+=1)u[r].c();M(l,"for","midi-input-select"),c[0].id===void 0&&T(()=>c[4].call(e))},m(r,f){m(r,l,f),m(r,n,f),m(r,e,f);for(let s=0;s<u.length;s+=1)u[s].m(e,null);S(e,c[0].id),t||(i=[A(e,"change",c[4]),A(e,"change",c[3])],t=!0)},p(r,f){if(f&4){o=r[2];let s;for(s=0;s<o.length;s+=1){const a=L(r,o,s);u[s]?u[s].p(a,f):(u[s]=N(a),u[s].c(),u[s].m(e,null))}for(;s<u.length;s+=1)u[s].d(1);u.length=o.length}f&5&&S(e,r[0].id)},d(r){r&&p(l),r&&p(n),r&&p(e),F(u,r),t=!1,V(i)}}}function N(c){let l,n=c[12].name+"",e,t;return{c(){l=h("option"),e=v(n),l.__value=t=c[12].id,l.value=l.__value},m(i,o){m(i,l,o),_(l,e)},p(i,o){o&4&&n!==(n=i[12].name+"")&&b(e,n),o&4&&t!==(t=i[12].id)&&(l.__value=t,l.value=l.__value)},d(i){i&&p(l)}}}function w(c){let l,n=c[1],e=[];for(let t=0;t<n.length;t+=1)e[t]=q(D(c,n,t));return{c(){for(let t=0;t<e.length;t+=1)e[t].c();l=j()},m(t,i){for(let o=0;o<e.length;o+=1)e[o].m(t,i);m(t,l,i)},p(t,i){if(i&2){n=t[1];let o;for(o=0;o<n.length;o+=1){const u=D(t,n,o);e[o]?e[o].p(u,i):(e[o]=q(u),e[o].c(),e[o].m(l.parentNode,l))}for(;o<e.length;o+=1)e[o].d(1);e.length=n.length}},d(t){F(e,t),t&&p(l)}}}function q(c){let l,n,e=c[9].note+"",t,i,o=c[9].timestamp+"",u,r,f=c[9].velocity+"",s;return{c(){l=h("li"),n=v("Note: "),t=v(e),i=v(", Timestamp: "),u=v(o),r=v(", Velocity: "),s=v(f)},m(a,d){m(a,l,d),_(l,n),_(l,t),_(l,i),_(l,u),_(l,r),_(l,s)},p(a,d){d&2&&e!==(e=a[9].note+"")&&b(t,e),d&2&&o!==(o=a[9].timestamp+"")&&b(u,o),d&2&&f!==(f=a[9].velocity+"")&&b(s,f)},d(a){a&&p(l)}}}function U(c){let l,n,e,t,i;function o(s,a){var d;return(d=s[0])!=null&&d.id?R:Q}let u=o(c),r=u(c),f=c[1].length>0&&w(c);return{c(){l=h("h1"),l.textContent="Svelte MIDI v1.1",n=k(),e=h("div"),r.c(),t=k(),i=h("ul"),f&&f.c(),M(i,"id","note-list")},m(s,a){m(s,l,a),m(s,n,a),m(s,e,a),r.m(e,null),_(e,t),_(e,i),f&&f.m(i,null)},p(s,[a]){u===(u=o(s))&&r?r.p(s,a):(r.d(1),r=u(s),r&&(r.c(),r.m(e,t))),s[1].length>0?f?f.p(s,a):(f=w(s),f.c(),f.m(i,null)):f&&(f.d(1),f=null)},i:I,o:I,d(s){s&&p(l),s&&p(n),s&&p(e),r.d(),f&&f.d()}}}function X(c,l,n){let e,t=null,i=[],o=[];const u=a=>{const d=a.data[0],g=a.timeStamp;if(a.data[1],a.data.length>2&&a.data[2],d<=144&&d<=159){const y=a.data[1],P=a.data[2];n(1,i=[{note:y,timestamp:g,velocity:P},...i])}},r=a=>{t!==a&&(t&&t.removeEventListener("midimessage",u),n(0,t=a),t.addEventListener("midimessage",u))},f=a=>{const d=a.target.value,g=e.inputs.get(d);g&&r(g)};z(async()=>{if(!navigator.requestMIDIAccess){const a="WebMidi API not supported on this browser.";alert(a),console.log(a);return}try{e=await navigator.requestMIDIAccess(),e.onstatechange=a=>{const d=Array.from(e.inputs.values());d.length>0?(n(2,o=d.map((g,y)=>({id:g.id,name:`${y} ${g.name}`}))),(!t||!d.includes(t))&&r(d[0])):(n(2,o=[{id:"",name:"No available MIDI inputs"}]),n(0,t=null))},e.onstatechange()}catch(a){console.error("Failed to initialize MIDI: ",a)}});function s(){t.id=K(this),n(0,t),n(2,o)}return[t,i,o,f,s]}class Y extends C{constructor(l){super();O(this,l,X,U,E,{})}}function Z(c){let l,n;return l=new Y({}),{c(){W(l.$$.fragment)},m(e,t){$(l,e,t),n=!0},p:I,i(e){n||(B(l.$$.fragment,e),n=!0)},o(e){G(l.$$.fragment,e),n=!1},d(e){H(l,e)}}}class x extends C{constructor(l){super();O(this,l,null,Z,E,{})}}new x({target:document.body});
